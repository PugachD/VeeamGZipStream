В проекте реализовал имитацию пула потоков, используя стандартные средства .Net 3.5 ("реализация с использованием Thread-ов").
После открытия файловых потоков для чтения и записи произвожу разбор исходного файла на блоки. Организовывается очередь из задач (число которых равно числу блоков, на которые можно разбить файл). Каждый поток берет одну задачу из очереди задач и выполняет ее: Считвает блок из потока чтения (исходнго файла), выполняет операцию компрессии/декомпрессии, записывает блок в поток записи (выходной файл).
После компрессии в конец получившегося потока записи (выходной файл) записываются: список размеров сжатых блоков, их количество и метка для определеия, мы ли сжали этот файл или нет.
При декомпрессии перед основным процессом происходит обратная операция. Из конца файла считываются данные и разбираются (составлется список блоков с прочитанными размерами, их нумерация).
Зачем нужно записывать размерности? Потому что каждый блок при компрессии сжимается с заголовком и суффиксом (по стандартам GZipStream) и поэтому необходимо четко по порядку считывать скомпрессированный файл, чтобы не сбилась позиция чтения и не съехали заголовки и вообще данные, и выполнять операцию декомпрессии.
